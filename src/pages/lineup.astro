---
import Button from "../components/Button.astro";
import Card from "../components/Card.astro";
import Main from "../layouts/Main.astro";

// const urlParams = new URLSearchParams(window.location.search);
// const day = urlParams.get("day");

const data = await fetch(
  "https://mjaccmeonfywsevhklts.supabase.co/rest/v1/kunedata?image=neq.NULL&day=eq.Thursday&select=artistname,day,location,image",
  {
    method: "GET",
    headers: {
      apikey:
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qYWNjbWVvbmZ5d3NldmhrbHRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE2Nzg3ODg2OTgsImV4cCI6MTk5NDM2NDY5OH0.dwmg0xpH8rIwvdD7VoUqaKiM-Co02FYLlXGsdnc7nhs",
    },
  }
).then((res) => res.json());
---

<Main title="LINEUP">
  <div class="buttonNavigation">
    <Button type="creampurple" text="wednesday" />
    <Button type="creampurple" text="thursday" />
    <Button type="creampurple" text="friday" />
    <Button type="creampurple" text="saturday" />
    <Button type="creampurple" text="sunday" />
  </div>

  <div class="artist_container">
    {
      data.map((artist) => {
        return <Card data={artist} />;
      })
    }
  </div>
</Main>

<style>
  @media (min-width: 800px) {
    .artist_container {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 60px;
    }
    .buttonNavigation {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 4rem;
    }
  }

  div {
    padding: 0 55px;
    z-index: -1;
  }
</style>
